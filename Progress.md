# RKC_MPI
富岳でPCモデルのRKCを動かす。
MPIとOpenMP必須。

可能な限り，動かすモデルには汎用性をもたせる。

### 20230712
/Neuron_typeフォルダに各モデルのcellファイルとionファイルを用意した。
カレントディレクトリにこれをコピペしてmakeする。
非常に手間なので，なんとかしたいが，どうすればよいか。

PCモデルのCPU版を移植したが，（おそらくrev_ca2の計算のせいで）CNでも吹っ飛ぶ。

### 20230724
- [ ] GPU版とシミュレーション結果を比較して原因を特定する
    - [x] mat
    - [x] RA, AREA, CM    
    - [ ] 各ion
        - そもそも，Passive時の電流入力に対する膜電位の反応が大きすぎる
        - 0.1e-3 mA入力に対して，値が10 mV近く上がるのはおかしい
        - [x] もう一度matの値を確認

### 20230727
0724の**そもそも，Passive時の電流入力に対する膜電位の反応が大きすぎる**の原因が特定できないので，BE法を先に入れることにする。

### 20231122
あまりにもバグを取っている時間が馬鹿らしいので作戦変更する。
RKC_GPUをcudaファイルのままCPU版に変更していく。
なので，まずは，PKJ_Switching_GPUを再作成する（SWCフォーマット，BE，CNm，RK4，RKC）。
その中で，Switching（Switch.cu&Switch.cuh）を先に作成してしまうこれを11月中に行いたい。
可能ならば，PKJモデルを最新版にする。

12月中に，それを**徐々**にCPU版に変更していく（PKJ_Switching_MPI）。
ネットワークモデルにしていくことはおいおい考える。
とにかくSwitchingを最優先。
また，並行してシミュレータ関係の論文，SONATAなどのデータフォーマットの論文，JSONファイルへの対応，その他の陽解法の調査（またはimplicitRKCなどの調査）を行う。

調査した結果を踏まえて，上記のGPUおよびMPI用シミュレータをUpdateする（1月前半）。
ToDoリストを追加・更新。




